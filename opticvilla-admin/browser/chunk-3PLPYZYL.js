import{A as y,B as v,E as a,Q as b,T as _,_ as S,aa as h,ca as x,da as g,ea as C,fa as F,ga as I,h as u,ha as L,ia as E,k as w,l as p,la as M,na as N,p as s,pa as j,q as c,r as m,t as l,v as o,w as n,x as f}from"./chunk-FQ33SD6G.js";function R(e,d){e&1&&(o(0,"div"),a(1,"username is required."),n())}function k(e,d){if(e&1&&(o(0,"div",14),m(1,R,2,0,"div",15),n()),e&2){let t=v();s(),l("ngIf",t.username==null||t.username.errors==null?null:t.username.errors.required)}}function D(e,d){e&1&&(o(0,"div"),a(1,"Password is required."),n())}function G(e,d){e&1&&(o(0,"div"),a(1,"Password must be at least 6 characters long."),n())}function P(e,d){if(e&1&&(o(0,"div",14),m(1,D,2,0,"div",15)(2,G,2,0,"div",15),n()),e&2){let t=v();s(),l("ngIf",t.password==null||t.password.errors==null?null:t.password.errors.required),s(),l("ngIf",t.password==null||t.password.errors==null?null:t.password.errors.minlength)}}var q=(()=>{class e{constructor(t,r,i){this.authService=t,this.fb=r,this.router=i}ngOnInit(){if(this.authService.isLoggedIn()){this.router.navigate(["order-list"]);return}this.loginForm=this.fb.group({username:["",[g.required]],password:["",[g.required,g.minLength(6)]]})}onSubmit(){if(this.loginForm.valid){let t={username:this.loginForm.value.username,password:this.loginForm.value.password};this.authService.login(t).subscribe({next:r=>{console.log("Login successful",r),this.authService.storeToken(r.token),this.router.navigate(["order-list"])},error:r=>{console.error("Login failed",r)}})}else console.log("Form is invalid")}get username(){return this.loginForm.get("username")}get password(){return this.loginForm.get("password")}static{this.\u0275fac=function(r){return new(r||e)(c(j),c(M),c(S))}}static{this.\u0275cmp=w({type:e,selectors:[["app-login"]],decls:21,vars:4,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gray-200"],[1,"card","card-flush","w-1/4"],[1,"card-header"],[1,"card-title","text-center"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","username",1,"block","text-sm","font-medium","text-gray-700"],["id","username","formControlName","username","type","text",1,"mt-1","p-2","border","border-gray-300","rounded","w-full"],["class","text-red-500 text-sm",4,"ngIf"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["id","password","formControlName","password","type","password",1,"mt-1","p-2","border","border-gray-300","rounded","w-full"],["type","submit",1,"w-full","bg-blue-500","text-white","py-2","px-4","rounded",3,"disabled"],[1,"card-footer","text-center"],[1,"text-red-500","text-sm"],[4,"ngIf"]],template:function(r,i){r&1&&(o(0,"main")(1,"div",0)(2,"div",1)(3,"div",2)(4,"h2",3),a(5,"Sign In"),n()(),o(6,"div",4)(7,"form",5),y("ngSubmit",function(){return i.onSubmit()}),o(8,"div",6)(9,"label",7),a(10,"Username"),n(),f(11,"input",8),m(12,k,2,1,"div",9),n(),o(13,"div",6)(14,"label",10),a(15,"Password"),n(),f(16,"input",11),m(17,P,3,2,"div",9),n(),o(18,"button",12),a(19,"Login"),n()()(),f(20,"div",13),n()()()),r&2&&(s(7),l("formGroup",i.loginForm),s(5),l("ngIf",(i.username==null?null:i.username.invalid)&&((i.username==null?null:i.username.touched)||(i.username==null?null:i.username.dirty))),s(5),l("ngIf",(i.password==null?null:i.password.invalid)&&((i.password==null?null:i.password.touched)||(i.password==null?null:i.password.dirty))),s(),l("disabled",i.loginForm.invalid))},dependencies:[b,I,x,C,F,L,E]})}}return e})();var V=[{path:"login",component:q}],A=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=p({type:e})}static{this.\u0275inj=u({imports:[h.forChild(V),h]})}}return e})();var ie=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=p({type:e})}static{this.\u0275inj=u({imports:[_,A,N]})}}return e})();export{ie as AuthModule};
