import{a as K,c as Q,f as v,g as X,h as d,i as Y,j as Z,k as ee,l as te,m as re,n as ie,o as oe}from"./chunk-ZVSLJY24.js";import{a as ne}from"./chunk-6OHUCNBF.js";import{c as J,j as P}from"./chunk-DHQW6UCI.js";import{Ca as $,Ea as p,Gb as F,Ia as c,M as T,N as x,Oa as S,Pa as _,Q as q,Vb as H,W as R,X as j,Y as L,Z as V,bb as z,cb as G,eb as C,fb as y,gb as E,hb as k,ib as o,jb as i,kb as m,lb as n,mb as a,ob as A,pb as O,qb as B,rb as b,sb as U,tb as r,ub as g,vb as w,wb as W}from"./chunk-LGJWJGDP.js";var h=class l extends ne{constructor(t){super();this.http=t}eyeglassesCache=[];setEyeglasses(t){this.eyeglassesCache=t}getEyeglasses(){return this.eyeglassesCache}getCachedEyeglassById(t){return this.eyeglassesCache.find(s=>s.id===t)}getAll(){this.configure();let t=`${P.apiServer}/api/eyeglasses/list`;return this.http.get(t,{headers:this.headers})}getById(t){this.configure();let s=`${P.apiServer}/api/eyeglasses/${t}`;return this.http.get(s,{headers:this.headers})}update(t){this.configure();let s=`${P.apiServer}/api/eyeglasses/${t.id}`;return this.http.post(s,t,{headers:this.headers})}static \u0275fac=function(s){return new(s||l)(q(J))};static \u0275prov=T({token:l,factory:l.\u0275fac,providedIn:"root"})};var me=(l,e)=>e.id;function pe(l,e){if(l&1){let t=A();n(0,"tr",18)(1,"td",19),r(2),a(),n(3,"td",20),r(4),a(),n(5,"td",20),r(6),a(),n(7,"td",20),r(8),a(),n(9,"td",20),r(10),a(),n(11,"td",21),r(12),a(),n(13,"td",22),r(14),a(),n(15,"td",20),r(16),a(),n(17,"td",20)(18,"button",23),B("click",function(){let u=R(t).$implicit,M=b(2);return j(M.viewDetails(u.id))}),r(19," View Details "),a()()()}if(l&2){let t=e.$implicit;p(2),g(t.model),p(2),g(t.brand),p(2),g(t.frame_type),p(2),g(t.gender),p(2),g(t.size),p(2),w("\u20B9",t.mrp),p(2),w("\u20B9",t.selling_price),p(2),g(t.shape)}}function ce(l,e){if(l&1&&y(0,pe,20,8,"tr",18,me),l&2){let t=b();E(t.getPaginatedEyeglasses())}}function ue(l,e){l&1&&(n(0,"tr")(1,"td",24),r(2,"No eyeglasses found."),a()())}function ge(l,e){if(l&1){let t=A();n(0,"button",25),B("click",function(){let u=R(t).$implicit,M=b();return j(M.setPage(u))}),r(1),a()}if(l&2){let t=e.$implicit,s=b();U("bg-blue-600",s.currentPage===t)("text-white",s.currentPage===t),p(),w(" ",t," ")}}var N=class l{constructor(e,t,s){this.service=e;this.cd=t;this.router=s}eyeglasses=[];currentPage=1;itemsPerPage=10;ngOnInit(){this.service.getAll().subscribe({next:e=>{this.eyeglasses=e,this.service.setEyeglasses(e),console.log(e),this.cd.detectChanges()},error:e=>{console.log(e),alert("Service down, Please try again later!")}})}viewDetails(e){this.router.navigate(["/products/eyeglasses",e])}getPaginatedEyeglasses(){let e=(this.currentPage-1)*this.itemsPerPage;return this.eyeglasses.slice(e,e+this.itemsPerPage)}totalPages(){return Math.ceil(this.eyeglasses.length/this.itemsPerPage)}setPage(e){this.currentPage=e}get showingStart(){return(this.currentPage-1)*this.itemsPerPage+1}get showingEnd(){return Math.min(this.currentPage*this.itemsPerPage,this.eyeglasses.length)}get pageArray(){return Array.from({length:this.totalPages()},(e,t)=>t+1)}static \u0275fac=function(t){return new(t||l)(c(h),c(F),c(Q))};static \u0275cmp=S({type:l,selectors:[["app-eyeglasses-list"]],decls:49,vars:4,consts:[[1,"space-y-6","p-6"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","gap-4","mb-6"],[1,"bg-white","rounded-xl","p-4","shadow","border-l-4","border-blue-500"],[1,"text-sm","text-gray-500"],[1,"text-xl","font-semibold","text-blue-600"],[1,"bg-white","rounded-xl","p-4","shadow","border-l-4","border-green-500"],[1,"text-xl","font-semibold","text-green-600"],[1,"bg-white","rounded-xl","p-4","shadow","border-l-4","border-purple-500"],[1,"text-xl","font-semibold","text-purple-600"],[1,"bg-white","p-6","rounded-xl","shadow-md"],[1,"overflow-x-auto"],[1,"min-w-full","text-sm","text-left"],[1,"text-gray-600","uppercase","border-b"],[1,"px-2","py-3"],[1,"mt-4","flex","justify-between","items-center"],[1,"text-sm","text-gray-600"],[1,"flex","space-x-1"],[1,"px-3","py-1","rounded","border","text-sm","hover:bg-blue-500",3,"bg-blue-600","text-white"],[1,"border-b","hover:bg-gray-50"],[1,"px-2","py-2","font-medium"],[1,"px-2","py-2"],[1,"px-2","py-2","line-through","text-red-400"],[1,"px-2","py-2","text-green-600","font-semibold"],[1,"px-4","py-1","text-white","bg-gray-600","rounded","hover:bg-blue-700",3,"click"],["colspan","10",1,"text-center","py-6","text-gray-500"],[1,"px-3","py-1","rounded","border","text-sm","hover:bg-blue-500",3,"click"]],template:function(t,s){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),r(4,"Total Products"),a(),n(5,"p",4),r(6,"123"),a()(),n(7,"div",5)(8,"h4",3),r(9,"Avg. Discount"),a(),n(10,"p",6),r(11,"27%"),a()(),n(12,"div",7)(13,"h4",3),r(14,"Top Brand"),a(),n(15,"p",8),r(16,"IDEE"),a()()(),n(17,"div",9)(18,"div",10)(19,"table",11)(20,"thead",12)(21,"tr")(22,"th",13),r(23,"Model"),a(),n(24,"th",13),r(25,"Brand"),a(),n(26,"th",13),r(27,"Frame"),a(),n(28,"th",13),r(29,"Gender"),a(),n(30,"th",13),r(31,"Size"),a(),n(32,"th",13),r(33,"MRP"),a(),n(34,"th",13),r(35,"Price"),a(),n(36,"th",13),r(37,"Shape"),a(),n(38,"th",13),r(39,"Action"),a()()(),n(40,"tbody"),z(41,ce,2,0)(42,ue,3,0,"tr"),a()()(),n(43,"div",14)(44,"div",15),r(45),a(),n(46,"div",16),y(47,ge,2,5,"button",17,C),a()()()()),t&2&&(p(41),G(s.eyeglasses.length>0?41:42),p(4),W(" Showing ",s.showingStart," - ",s.showingEnd," of ",s.eyeglasses.length," entries "),p(2),E(s.pageArray))},encapsulation:2})};function he(l,e){}var f=class l{constructor(e,t,s,u){this.route=e;this.eyeglassesService=t;this.cd=s;this.fb=u}eyeglass=null;productForm;productId;ngOnInit(){this.initForm();let e=this.route.snapshot.paramMap.get("id");if(e){this.productId=e;let t=this.eyeglassesService.getCachedEyeglassById(e);t?(this.eyeglass=t,this.patchFormWithApi(),console.log("loaded from cache")):(console.log("fallback to api"),this.eyeglassesService.getById(e).subscribe(s=>{this.eyeglass=s,this.cd.detectChanges(),this.patchFormWithApi()})),console.log(this.eyeglass)}}initForm(){this.productForm=this.fb.group({model:["",d.required],article:["",d.required],frame_color:["",d.required],side_color:["",d.required],size:["",d.required],gender:["",d.required],shape:["",d.required],brand:["",d.required],frame_type:["",d.required],frame_material:["",d.required],description:["",[d.required,d.minLength(10)]],mrp:["",[d.required,d.pattern(/^\d+$/)]],discount:["",[d.required,d.min(0),d.max(100)]],selling_price:["",[d.required,d.pattern(/^\d+$/)]],warranty:["",d.required],categories:this.fb.array([]),image:[""]})}patchFormWithApi(){let e=this.eyeglass;e&&this.productForm.patchValue({model:e.model,article:e.article,frame_color:e.frame_color,side_color:e.side_color,size:e.size,gender:e.gender,shape:e.shape,brand:e.brand,frame_type:e.frame_type,frame_material:e.frame_material,description:e.description,mrp:e.mrp,discount:e.discount,selling_price:e.selling_price,warranty:e.warranty,image:e.image})}get categories(){return this.productForm.get("categories")}onSubmit(){if(this.productForm.valid){console.log("Product Submitted:",this.productForm.value);let e={id:this.productId,article:this.productForm.value.article.trim(),brand:this.productForm.value.brand.trim(),categories:this.productForm.value.categories.map(t=>t.trim()),created_at:this.productForm.value.created_at,updated_at:this.productForm.value.updated_at,deleted_at:this.productForm.value.deleted_at,description:this.productForm.value.description.trim(),discount:Number(this.productForm.value.discount),discount_amount:Number(this.productForm.value.discount_amount),frame_color:this.productForm.value.frame_color.trim(),frame_material:this.productForm.value.frame_material.trim(),frame_type:this.productForm.value.frame_type.trim(),gender:this.productForm.value.gender.trim(),image:this.productForm.value.image.trim(),is_delete:!!this.productForm.value.is_delete,model:this.productForm.value.model.trim(),mrp:Number(this.productForm.value.mrp),old_product_id:Number(this.productForm.value.old_product_id),selling_price:Number(this.productForm.value.selling_price),shape:this.productForm.value.shape.trim(),side_color:this.productForm.value.side_color.trim(),size:this.productForm.value.size.trim(),warranty:this.productForm.value.warranty.trim()};this.eyeglassesService.update(e).subscribe({next:t=>{alert("updated!")},error:t=>{alert("Error updating product")}})}else console.log("Form is invalid"),this.productForm.markAllAsTouched()}static \u0275fac=function(t){return new(t||l)(c(K),c(h),c(F),c(ie))};static \u0275cmp=S({type:l,selectors:[["app-eyeglass-details"]],decls:103,vars:2,consts:[[1,"bg-gray-50","min-h-screen","p-6",3,"ngSubmit","formGroup"],[1,"max-w-7xl","mx-auto"],[1,"text-2xl","font-bold","mb-6"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6"],[1,"space-y-6","lg:col-span-2"],[1,"bg-white","p-6","rounded-xl","shadow"],[1,"font-semibold","mb-4"],[1,"block","mb-2","text-sm","font-medium"],["type","text","formControlName","model","placeholder","Product Name",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],[1,"block","mt-4","mb-2","text-sm","font-medium"],["rows","5","formControlName","description","placeholder","Write a detailed product description...",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["formControlName","frame_material","placeholder","Category",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],["formControlName","frame_type","placeholder","Sub-Category",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],[1,"mt-4"],[1,"space-y-2"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],["formControlName","article","placeholder","SKU",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],[1,"flex","gap-4"],[1,"border-dashed","border-2","border-gray-300","w-24","h-24","flex","items-center","justify-center","rounded-lg","cursor-pointer","hover:bg-gray-100"],["type","file",1,"hidden"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-400"],["d","M12 4v16m8-8H4","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"relative","w-24","h-24"],[1,"w-full","h-full","object-cover","rounded-lg",3,"src"],[1,"absolute","top-0","right-0","bg-red-500","text-white","text-xs","px-1","py-0.5","rounded-bl-lg"],[1,"space-y-6"],[1,"grid","grid-cols-1","gap-4"],["formControlName","brand","placeholder","Brand Name",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],["formControlName","size","placeholder","Size",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],[1,"grid","grid-cols-2","gap-2"],["formControlName","frame_color","placeholder","Frame Color",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],["formControlName","side_color","placeholder","Side Color",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],["formControlName","gender","placeholder","Gender",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],["formControlName","shape","placeholder","Shape",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],["formControlName","warranty","placeholder","Warranty",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],[1,"grid","grid-cols-2","gap-4"],["formControlName","mrp","placeholder","MRP",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],["formControlName","selling_price","placeholder","Selling Price",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],["formControlName","discount","placeholder","Discount %",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],[1,"flex","justify-between","items-center","pt-4"],["type","submit",1,"bg-emerald-500","text-white","hover:bg-gray-300","text-sm","px-4","py-2","rounded-lg"]],template:function(t,s){if(t&1&&(o(0,"form",0),O("ngSubmit",function(){return s.onSubmit()}),o(1,"div",1)(2,"h1",2),r(3,"Manage Product"),i(),o(4,"div",3)(5,"div",4)(6,"div",5)(7,"h2",6),r(8,"Name and Description"),i(),o(9,"label",7),r(10,"Product Name"),i(),m(11,"input",8),o(12,"label",9),r(13,"Product Description"),i(),m(14,"textarea",10),i(),o(15,"div",5)(16,"h2",6),r(17,"Category"),i(),o(18,"div",11)(19,"div")(20,"label",7),r(21,"Product Category"),i(),m(22,"input",12),i(),o(23,"div")(24,"label",7),r(25,"Sub-Category"),i(),m(26,"input",13),i()(),o(27,"div",14)(28,"label",7),r(29,"Extra Categories"),i(),o(30,"div",15),y(31,he,0,0,null,null,C),i()()(),o(33,"div",5)(34,"h2",6),r(35,"Manage Stock"),i(),o(36,"div",16)(37,"div")(38,"label",7),r(39,"SKU"),i(),m(40,"input",17),i()()(),o(41,"div",5)(42,"h2",6),r(43,"Product Image"),i(),o(44,"div",18)(45,"label",19),m(46,"input",20),L(),o(47,"svg",21),m(48,"path",22),i()(),V(),o(49,"div",23),m(50,"img",24),o(51,"button",25),r(52,"Remove"),i()()()()(),o(53,"div",26)(54,"div",5)(55,"h2",6),r(56,"Product Details"),i(),o(57,"div",27)(58,"div")(59,"label",7),r(60,"Brand Name"),i(),m(61,"input",28),i(),o(62,"div")(63,"label",7),r(64,"Product Size"),i(),m(65,"input",29),i(),o(66,"div")(67,"label",7),r(68,"Product Colors"),i(),o(69,"div",30),m(70,"input",31)(71,"input",32),i()(),o(72,"div")(73,"label",7),r(74,"Gender"),i(),m(75,"input",33),i(),o(76,"div")(77,"label",7),r(78,"Shape"),i(),m(79,"input",34),i(),o(80,"div")(81,"label",7),r(82,"Warranty"),i(),m(83,"input",35),i()()(),o(84,"div",5)(85,"h2",6),r(86,"Product Pricing"),i(),o(87,"div",36)(88,"div")(89,"label",7),r(90,"MRP"),i(),m(91,"input",37),i(),o(92,"div")(93,"label",7),r(94,"Selling Price"),i(),m(95,"input",38),i(),o(96,"div")(97,"label",7),r(98,"Discount (%)"),i(),m(99,"input",39),i()()(),o(100,"div",40)(101,"button",41),r(102,"Save Product"),i()()()()()()),t&2){let u;k("formGroup",s.productForm),p(31),E(s.categories.controls),p(19),k("src",(u=s.productForm.get("image"))==null?null:u.value,$)}},dependencies:[oe,ee,X,Y,Z,te,re],encapsulation:2})};var fe=[{path:"eyeglasses",component:N},{path:"eyeglasses/:id",component:f}],D=class l{static \u0275fac=function(t){return new(t||l)};static \u0275mod=_({type:l});static \u0275inj=x({imports:[v.forChild(fe),v]})};var le=class l{static \u0275fac=function(t){return new(t||l)};static \u0275mod=_({type:l});static \u0275inj=x({imports:[H,v,D,f]})};export{le as ProductsModule};
