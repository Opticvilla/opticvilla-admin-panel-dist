import{a as W,c as J,f as A,g as K,h as m,i as Q,j as X,k as Y,l as Z,m as ee,n as te,o as re}from"./chunk-ZVSLJY24.js";import{a as ie}from"./chunk-6OHUCNBF.js";import{c as U,j as S}from"./chunk-DHQW6UCI.js";import{Ca as q,Ea as d,Gb as y,Ia as u,M as k,N as B,Oa as E,Pa as $,Q as T,Vb as me,W as F,X as P,Y as j,Z as L,bb as V,cb as z,eb as x,fb as f,gb as v,hb as C,ib as o,jb as i,kb as p,lb as a,mb as l,ob as I,pb as G,qb as N,rb as b,sb as O,tb as e,ub as h,vb as c,wb as H}from"./chunk-LGJWJGDP.js";var D=class s extends ie{constructor(r){super();this.http=r}eyeglassesCache=[];setEyeglasses(r){this.eyeglassesCache=r}getEyeglasses(){return this.eyeglassesCache}getCachedEyeglassById(r){return this.eyeglassesCache.find(n=>n.id===r)}getAll(){this.configure();let r=`${S.apiServer}/api/eyeglasses/list`;return this.http.get(r,{headers:this.headers})}getById(r){this.configure();let n=`${S.apiServer}/api/eyeglasses/${r}`;return this.http.get(n,{headers:this.headers})}update(r){this.configure();let n=`${S.apiServer}/api/eyeglasses/${r.id}`;return this.http.post(n,r,{headers:this.headers})}static \u0275fac=function(n){return new(n||s)(T(U))};static \u0275prov=k({token:s,factory:s.\u0275fac,providedIn:"root"})};var he=(s,t)=>t.id;function fe(s,t){if(s&1){let r=I();a(0,"tr",18)(1,"td",19),e(2),l(),a(3,"td",20),e(4),l(),a(5,"td",20),e(6),l(),a(7,"td",20),e(8),l(),a(9,"td",20),e(10),l(),a(11,"td",21),e(12),l(),a(13,"td",22),e(14),l(),a(15,"td",20),e(16),l(),a(17,"td",20)(18,"button",23),N("click",function(){let g=F(r).$implicit,_=b(2);return P(_.viewDetails(g.id))}),e(19," View Details "),l()()()}if(s&2){let r=t.$implicit;d(2),h(r.model),d(2),h(r.brand),d(2),h(r.frame_type),d(2),h(r.gender),d(2),h(r.size),d(2),c("\u20B9",r.mrp),d(2),c("\u20B9",r.selling_price),d(2),h(r.shape)}}function ve(s,t){if(s&1&&f(0,fe,20,8,"tr",18,he),s&2){let r=b();v(r.getPaginatedEyeglasses())}}function be(s,t){s&1&&(a(0,"tr")(1,"td",24),e(2,"No eyeglasses found."),l()())}function Ee(s,t){if(s&1){let r=I();a(0,"button",25),N("click",function(){let g=F(r).$implicit,_=b();return P(_.setPage(g))}),e(1),l()}if(s&2){let r=t.$implicit,n=b();O("bg-blue-600",n.currentPage===r)("text-white",n.currentPage===r),d(),c(" ",r," ")}}var oe=class s{constructor(t,r,n){this.service=t;this.cd=r;this.router=n}eyeglasses=[];currentPage=1;itemsPerPage=10;ngOnInit(){this.service.getAll().subscribe({next:t=>{this.eyeglasses=t,this.service.setEyeglasses(t),console.log(t),this.cd.detectChanges()},error:t=>{console.log(t),alert("Service down, Please try again later!")}})}viewDetails(t){this.router.navigate(["/products/eyeglasses",t])}getPaginatedEyeglasses(){let t=(this.currentPage-1)*this.itemsPerPage;return this.eyeglasses.slice(t,t+this.itemsPerPage)}totalPages(){return Math.ceil(this.eyeglasses.length/this.itemsPerPage)}setPage(t){this.currentPage=t}get showingStart(){return(this.currentPage-1)*this.itemsPerPage+1}get showingEnd(){return Math.min(this.currentPage*this.itemsPerPage,this.eyeglasses.length)}get pageArray(){return Array.from({length:this.totalPages()},(t,r)=>r+1)}static \u0275fac=function(r){return new(r||s)(u(D),u(y),u(J))};static \u0275cmp=E({type:s,selectors:[["app-eyeglasses-list"]],decls:49,vars:4,consts:[[1,"space-y-6","p-6"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","gap-4","mb-6"],[1,"bg-white","rounded-xl","p-4","shadow","border-l-4","border-blue-500"],[1,"text-sm","text-gray-500"],[1,"text-xl","font-semibold","text-blue-600"],[1,"bg-white","rounded-xl","p-4","shadow","border-l-4","border-green-500"],[1,"text-xl","font-semibold","text-green-600"],[1,"bg-white","rounded-xl","p-4","shadow","border-l-4","border-purple-500"],[1,"text-xl","font-semibold","text-purple-600"],[1,"bg-white","p-6","rounded-xl","shadow-md"],[1,"overflow-x-auto"],[1,"min-w-full","text-sm","text-left"],[1,"text-gray-600","uppercase","border-b"],[1,"px-2","py-3"],[1,"mt-4","flex","justify-between","items-center"],[1,"text-sm","text-gray-600"],[1,"flex","space-x-1"],[1,"px-3","py-1","rounded","border","text-sm","hover:bg-blue-500",3,"bg-blue-600","text-white"],[1,"border-b","hover:bg-gray-50"],[1,"px-2","py-2","font-medium"],[1,"px-2","py-2"],[1,"px-2","py-2","line-through","text-red-400"],[1,"px-2","py-2","text-green-600","font-semibold"],[1,"px-4","py-1","text-white","bg-gray-600","rounded","hover:bg-blue-700",3,"click"],["colspan","10",1,"text-center","py-6","text-gray-500"],[1,"px-3","py-1","rounded","border","text-sm","hover:bg-blue-500",3,"click"]],template:function(r,n){r&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),e(4,"Total Products"),l(),a(5,"p",4),e(6,"123"),l()(),a(7,"div",5)(8,"h4",3),e(9,"Avg. Discount"),l(),a(10,"p",6),e(11,"27%"),l()(),a(12,"div",7)(13,"h4",3),e(14,"Top Brand"),l(),a(15,"p",8),e(16,"IDEE"),l()()(),a(17,"div",9)(18,"div",10)(19,"table",11)(20,"thead",12)(21,"tr")(22,"th",13),e(23,"Model"),l(),a(24,"th",13),e(25,"Brand"),l(),a(26,"th",13),e(27,"Frame"),l(),a(28,"th",13),e(29,"Gender"),l(),a(30,"th",13),e(31,"Size"),l(),a(32,"th",13),e(33,"MRP"),l(),a(34,"th",13),e(35,"Price"),l(),a(36,"th",13),e(37,"Shape"),l(),a(38,"th",13),e(39,"Action"),l()()(),a(40,"tbody"),V(41,ve,2,0)(42,be,3,0,"tr"),l()()(),a(43,"div",14)(44,"div",15),e(45),l(),a(46,"div",16),f(47,Ee,2,5,"button",17,x),l()()()()),r&2&&(d(41),z(n.eyeglasses.length>0?41:42),d(4),H(" Showing ",n.showingStart," - ",n.showingEnd," of ",n.eyeglasses.length," entries "),d(2),v(n.pageArray))},encapsulation:2})};function ye(s,t){}var M=class s{constructor(t,r,n,g){this.route=t;this.eyeglassesService=r;this.cd=n;this.fb=g}eyeglass=null;productForm;productId;ngOnInit(){this.initForm();let t=this.route.snapshot.paramMap.get("id");if(t){this.productId=t;let r=this.eyeglassesService.getCachedEyeglassById(t);r?(this.eyeglass=r,this.patchFormWithApi(),console.log("loaded from cache")):(console.log("fallback to api"),this.eyeglassesService.getById(t).subscribe(n=>{this.eyeglass=n,this.cd.detectChanges(),this.patchFormWithApi()})),console.log(this.eyeglass)}}initForm(){this.productForm=this.fb.group({model:["",m.required],article:["",m.required],frame_color:["",m.required],side_color:["",m.required],size:["",m.required],gender:["",m.required],shape:["",m.required],brand:["",m.required],frame_type:["",m.required],frame_material:["",m.required],description:["",[m.required,m.minLength(10)]],mrp:["",[m.required,m.pattern(/^\d+$/)]],discount:["",[m.required,m.min(0),m.max(100)]],selling_price:["",[m.required,m.pattern(/^\d+$/)]],warranty:["",m.required],categories:this.fb.array([]),image:[""]})}patchFormWithApi(){let t=this.eyeglass;t&&this.productForm.patchValue({model:t.model,article:t.article,frame_color:t.frame_color,side_color:t.side_color,size:t.size,gender:t.gender,shape:t.shape,brand:t.brand,frame_type:t.frame_type,frame_material:t.frame_material,description:t.description,mrp:t.mrp,discount:t.discount,selling_price:t.selling_price,warranty:t.warranty,image:t.image})}get categories(){return this.productForm.get("categories")}onSubmit(){if(this.productForm.valid){console.log("Product Submitted:",this.productForm.value);let t={id:this.productId,article:this.productForm.value.article.trim(),brand:this.productForm.value.brand.trim(),categories:this.productForm.value.categories.map(r=>r.trim()),created_at:this.productForm.value.created_at,updated_at:this.productForm.value.updated_at,deleted_at:this.productForm.value.deleted_at,description:this.productForm.value.description.trim(),discount:Number(this.productForm.value.discount),discount_amount:Number(this.productForm.value.discount_amount),frame_color:this.productForm.value.frame_color.trim(),frame_material:this.productForm.value.frame_material.trim(),frame_type:this.productForm.value.frame_type.trim(),gender:this.productForm.value.gender.trim(),image:this.productForm.value.image.trim(),is_delete:!!this.productForm.value.is_delete,model:this.productForm.value.model.trim(),mrp:Number(this.productForm.value.mrp),old_product_id:Number(this.productForm.value.old_product_id),selling_price:Number(this.productForm.value.selling_price),shape:this.productForm.value.shape.trim(),side_color:this.productForm.value.side_color.trim(),size:this.productForm.value.size.trim(),warranty:this.productForm.value.warranty.trim()};this.eyeglassesService.update(t).subscribe({next:r=>{alert("updated!")},error:r=>{alert("Error updating product")}})}else console.log("Form is invalid"),this.productForm.markAllAsTouched()}static \u0275fac=function(r){return new(r||s)(u(W),u(D),u(y),u(te))};static \u0275cmp=E({type:s,selectors:[["app-eyeglass-details"]],decls:103,vars:2,consts:[[1,"bg-gray-50","min-h-screen","p-6",3,"ngSubmit","formGroup"],[1,"max-w-7xl","mx-auto"],[1,"text-2xl","font-bold","mb-6"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6"],[1,"space-y-6","lg:col-span-2"],[1,"bg-white","p-6","rounded-xl","shadow"],[1,"font-semibold","mb-4"],[1,"block","mb-2","text-sm","font-medium"],["type","text","formControlName","model","placeholder","Product Name",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],[1,"block","mt-4","mb-2","text-sm","font-medium"],["rows","5","formControlName","description","placeholder","Write a detailed product description...",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["formControlName","frame_material","placeholder","Category",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],["formControlName","frame_type","placeholder","Sub-Category",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],[1,"mt-4"],[1,"space-y-2"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],["formControlName","article","placeholder","SKU",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],[1,"flex","gap-4"],[1,"border-dashed","border-2","border-gray-300","w-24","h-24","flex","items-center","justify-center","rounded-lg","cursor-pointer","hover:bg-gray-100"],["type","file",1,"hidden"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-400"],["d","M12 4v16m8-8H4","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"relative","w-24","h-24"],[1,"w-full","h-full","object-cover","rounded-lg",3,"src"],[1,"absolute","top-0","right-0","bg-red-500","text-white","text-xs","px-1","py-0.5","rounded-bl-lg"],[1,"space-y-6"],[1,"grid","grid-cols-1","gap-4"],["formControlName","brand","placeholder","Brand Name",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],["formControlName","size","placeholder","Size",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],[1,"grid","grid-cols-2","gap-2"],["formControlName","frame_color","placeholder","Frame Color",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],["formControlName","side_color","placeholder","Side Color",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],["formControlName","gender","placeholder","Gender",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],["formControlName","shape","placeholder","Shape",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],["formControlName","warranty","placeholder","Warranty",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],[1,"grid","grid-cols-2","gap-4"],["formControlName","mrp","placeholder","MRP",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],["formControlName","selling_price","placeholder","Selling Price",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],["formControlName","discount","placeholder","Discount %",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],[1,"flex","justify-between","items-center","pt-4"],["type","submit",1,"bg-emerald-500","text-white","hover:bg-gray-300","text-sm","px-4","py-2","rounded-lg"]],template:function(r,n){if(r&1&&(o(0,"form",0),G("ngSubmit",function(){return n.onSubmit()}),o(1,"div",1)(2,"h1",2),e(3,"Manage Product"),i(),o(4,"div",3)(5,"div",4)(6,"div",5)(7,"h2",6),e(8,"Name and Description"),i(),o(9,"label",7),e(10,"Product Name"),i(),p(11,"input",8),o(12,"label",9),e(13,"Product Description"),i(),p(14,"textarea",10),i(),o(15,"div",5)(16,"h2",6),e(17,"Category"),i(),o(18,"div",11)(19,"div")(20,"label",7),e(21,"Product Category"),i(),p(22,"input",12),i(),o(23,"div")(24,"label",7),e(25,"Sub-Category"),i(),p(26,"input",13),i()(),o(27,"div",14)(28,"label",7),e(29,"Extra Categories"),i(),o(30,"div",15),f(31,ye,0,0,null,null,x),i()()(),o(33,"div",5)(34,"h2",6),e(35,"Manage Stock"),i(),o(36,"div",16)(37,"div")(38,"label",7),e(39,"SKU"),i(),p(40,"input",17),i()()(),o(41,"div",5)(42,"h2",6),e(43,"Product Image"),i(),o(44,"div",18)(45,"label",19),p(46,"input",20),j(),o(47,"svg",21),p(48,"path",22),i()(),L(),o(49,"div",23),p(50,"img",24),o(51,"button",25),e(52,"Remove"),i()()()()(),o(53,"div",26)(54,"div",5)(55,"h2",6),e(56,"Product Details"),i(),o(57,"div",27)(58,"div")(59,"label",7),e(60,"Brand Name"),i(),p(61,"input",28),i(),o(62,"div")(63,"label",7),e(64,"Product Size"),i(),p(65,"input",29),i(),o(66,"div")(67,"label",7),e(68,"Product Colors"),i(),o(69,"div",30),p(70,"input",31)(71,"input",32),i()(),o(72,"div")(73,"label",7),e(74,"Gender"),i(),p(75,"input",33),i(),o(76,"div")(77,"label",7),e(78,"Shape"),i(),p(79,"input",34),i(),o(80,"div")(81,"label",7),e(82,"Warranty"),i(),p(83,"input",35),i()()(),o(84,"div",5)(85,"h2",6),e(86,"Product Pricing"),i(),o(87,"div",36)(88,"div")(89,"label",7),e(90,"MRP"),i(),p(91,"input",37),i(),o(92,"div")(93,"label",7),e(94,"Selling Price"),i(),p(95,"input",38),i(),o(96,"div")(97,"label",7),e(98,"Discount (%)"),i(),p(99,"input",39),i()()(),o(100,"div",40)(101,"button",41),e(102,"Save Product"),i()()()()()()),r&2){let g;C("formGroup",n.productForm),d(31),v(n.categories.controls),d(19),C("src",(g=n.productForm.get("image"))==null?null:g.value,q)}},dependencies:[re,Y,K,Q,X,Z,ee],encapsulation:2})};var R=class s extends ie{constructor(r){super();this.http=r}sunglassesCache=[];setSunglasses(r){this.sunglassesCache=r}getSunglasses(){return this.sunglassesCache}getCachedSunglassById(r){return this.sunglassesCache.find(n=>n.id===r)}getAll(){this.configure();let r=`${S.apiServer}/api/sunglasses/list`;return this.http.get(r,{headers:this.headers})}getById(r){this.configure();let n=`${S.apiServer}/api/sunglasses/${r}`;return this.http.get(n,{headers:this.headers})}update(r){this.configure();let n=`${S.apiServer}/api/sunglasses/${r.id}`;return this.http.post(n,r,{headers:this.headers})}static \u0275fac=function(n){return new(n||s)(T(U))};static \u0275prov=k({token:s,factory:s.\u0275fac,providedIn:"root"})};var Se=(s,t)=>t.id;function _e(s,t){if(s&1){let r=I();a(0,"tr",18)(1,"td",19),e(2),l(),a(3,"td",20),e(4),l(),a(5,"td",20),e(6),l(),a(7,"td",20),e(8),l(),a(9,"td",20),e(10),l(),a(11,"td",21),e(12),l(),a(13,"td",22),e(14),l(),a(15,"td",20),e(16),l(),a(17,"td",20)(18,"button",23),N("click",function(){let g=F(r).$implicit,_=b(2);return P(_.viewDetails(g.id))}),e(19," View Details "),l()()()}if(s&2){let r=t.$implicit;d(2),h(r.model),d(2),h(r.brand),d(2),h(r.frame_material),d(2),h(r.gender),d(2),h(r.size),d(2),c("\u20B9",r.mrp),d(2),c("\u20B9",r.selling_price),d(2),h(r.shape)}}function Ce(s,t){if(s&1&&f(0,_e,20,8,"tr",18,Se),s&2){let r=b();v(r.getPaginatedSunglasses())}}function we(s,t){s&1&&(a(0,"tr")(1,"td",24),e(2,"No sunglasses found."),l()())}function Fe(s,t){if(s&1){let r=I();a(0,"button",25),N("click",function(){let g=F(r).$implicit,_=b();return P(_.setPage(g))}),e(1),l()}if(s&2){let r=t.$implicit,n=b();O("bg-blue-600",n.currentPage===r)("text-white",n.currentPage===r),d(),c(" ",r," ")}}var ne=class s{constructor(t,r,n){this.service=t;this.cd=r;this.router=n}sunglasses=[];currentPage=1;itemsPerPage=10;ngOnInit(){this.service.getAll().subscribe({next:t=>{this.sunglasses=t,this.service.setSunglasses(t),console.log(t),this.cd.detectChanges()},error:t=>{console.log(t),alert("Service down, Please try again later!")}})}viewDetails(t){this.router.navigate(["/products/sunglasses",t])}getPaginatedSunglasses(){let t=(this.currentPage-1)*this.itemsPerPage;return this.sunglasses.slice(t,t+this.itemsPerPage)}totalPages(){return Math.ceil(this.sunglasses.length/this.itemsPerPage)}setPage(t){this.currentPage=t}get showingStart(){return(this.currentPage-1)*this.itemsPerPage+1}get showingEnd(){return Math.min(this.currentPage*this.itemsPerPage,this.sunglasses.length)}get pageArray(){return Array.from({length:this.totalPages()},(t,r)=>r+1)}static \u0275fac=function(r){return new(r||s)(u(R),u(y),u(J))};static \u0275cmp=E({type:s,selectors:[["app-sunglasses-list"]],decls:49,vars:4,consts:[[1,"space-y-6","p-6"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","gap-4","mb-6"],[1,"bg-white","rounded-xl","p-4","shadow","border-l-4","border-blue-500"],[1,"text-sm","text-gray-500"],[1,"text-xl","font-semibold","text-blue-600"],[1,"bg-white","rounded-xl","p-4","shadow","border-l-4","border-green-500"],[1,"text-xl","font-semibold","text-green-600"],[1,"bg-white","rounded-xl","p-4","shadow","border-l-4","border-purple-500"],[1,"text-xl","font-semibold","text-purple-600"],[1,"bg-white","p-6","rounded-xl","shadow-md"],[1,"overflow-x-auto"],[1,"min-w-full","text-sm","text-left"],[1,"text-gray-600","uppercase","border-b"],[1,"px-2","py-3"],[1,"mt-4","flex","justify-between","items-center"],[1,"text-sm","text-gray-600"],[1,"flex","space-x-1"],[1,"px-3","py-1","rounded","border","text-sm","hover:bg-blue-500",3,"bg-blue-600","text-white"],[1,"border-b","hover:bg-gray-50"],[1,"px-2","py-2","font-medium"],[1,"px-2","py-2"],[1,"px-2","py-2","line-through","text-red-400"],[1,"px-2","py-2","text-green-600","font-semibold"],[1,"px-4","py-1","text-white","bg-gray-600","rounded","hover:bg-blue-700",3,"click"],["colspan","10",1,"text-center","py-6","text-gray-500"],[1,"px-3","py-1","rounded","border","text-sm","hover:bg-blue-500",3,"click"]],template:function(r,n){r&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),e(4,"Total Products"),l(),a(5,"p",4),e(6,"123"),l()(),a(7,"div",5)(8,"h4",3),e(9,"Avg. Discount"),l(),a(10,"p",6),e(11,"27%"),l()(),a(12,"div",7)(13,"h4",3),e(14,"Top Brand"),l(),a(15,"p",8),e(16,"IDEE"),l()()(),a(17,"div",9)(18,"div",10)(19,"table",11)(20,"thead",12)(21,"tr")(22,"th",13),e(23,"Model"),l(),a(24,"th",13),e(25,"Brand"),l(),a(26,"th",13),e(27,"Frame"),l(),a(28,"th",13),e(29,"Gender"),l(),a(30,"th",13),e(31,"Size"),l(),a(32,"th",13),e(33,"MRP"),l(),a(34,"th",13),e(35,"Price"),l(),a(36,"th",13),e(37,"Shape"),l(),a(38,"th",13),e(39,"Action"),l()()(),a(40,"tbody"),V(41,Ce,2,0)(42,we,3,0,"tr"),l()()(),a(43,"div",14)(44,"div",15),e(45),l(),a(46,"div",16),f(47,Fe,2,5,"button",17,x),l()()()()),r&2&&(d(41),z(n.sunglasses.length>0?41:42),d(4),H(" Showing ",n.showingStart," - ",n.showingEnd," of ",n.sunglasses.length," entries "),d(2),v(n.pageArray))},encapsulation:2})};function Pe(s,t){}var ae=class s{constructor(t,r,n,g){this.route=t;this.sunglassesService=r;this.cd=n;this.fb=g}sunglass=null;productForm;productId;ngOnInit(){this.initForm();let t=this.route.snapshot.paramMap.get("id");if(t){this.productId=t;let r=this.sunglassesService.getCachedSunglassById(t);r?(this.sunglass=r,this.patchFormWithApi(),console.log("loaded from cache")):(console.log("fallback to api"),this.sunglassesService.getById(t).subscribe(n=>{this.sunglass=n,this.cd.detectChanges(),this.patchFormWithApi()})),console.log(this.sunglass)}}initForm(){this.productForm=this.fb.group({model:["",m.required],frame_color:["",m.required],frame_material:[""],glass_color:["",m.required],image:[""],size:["",m.required],gender:["",m.required],shape:["",m.required],brand:["",m.required],description:["",[m.required,m.minLength(10)]],mrp:["",[m.required,m.pattern(/^\d+$/)]],discount:["",[m.required,m.min(0),m.max(100),m.pattern(/^\d+$/)]],selling_price:["",[m.required,m.pattern(/^\d+$/)]],glass_type:[""],categories:this.fb.array([])})}patchFormWithApi(){let t=this.sunglass;t&&this.productForm.patchValue({model:t.model,frame_color:t.frame_color,frame_material:t.frame_material,size:t.size,gender:t.gender,shape:t.shape,brand:t.brand,description:t.description,mrp:t.mrp,discount:t.discount,selling_price:t.selling_price,image:t.image,glass_type:t.glass_type})}get categories(){return this.productForm.get("categories")}onSubmit(){if(this.productForm.valid){console.log("Product Submitted:",this.productForm.value);let t={id:this.productId,brand:this.productForm.value.brand.trim(),categories:this.productForm.value.categories.map(r=>r.trim()),created_at:this.productForm.value.created_at,updated_at:this.productForm.value.updated_at,deleted_at:this.productForm.value.deleted_at,description:this.productForm.value.description.trim(),discount:Number(this.productForm.value.discount),discount_amount:Number(this.productForm.value.discount_amount),frame_color:this.productForm.value.frame_color.trim(),frame_material:this.productForm.value.frame_material.trim(),gender:this.productForm.value.gender.trim(),image:this.productForm.value.image.trim(),model:this.productForm.value.model.trim(),mrp:Number(this.productForm.value.mrp),old_product_id:Number(this.productForm.value.old_product_id),selling_price:Number(this.productForm.value.selling_price),shape:this.productForm.value.shape.trim(),size:this.productForm.value.size.trim(),glass_color:this.productForm.value.glass_color.trim(),glass_type:this.productForm.value.glass_type.trim()};this.sunglassesService.update(t).subscribe({next:r=>{alert("updated!")},error:r=>{alert("Error updating product")}})}else console.log("Form is invalid"),this.productForm.markAllAsTouched()}getErrorMessage(t){return this.productForm.get(t)?.errors?.required?`${t} is required.`:""}static \u0275fac=function(r){return new(r||s)(u(W),u(R),u(y),u(te))};static \u0275cmp=E({type:s,selectors:[["app-sunglass-details"]],decls:120,vars:16,consts:[[1,"bg-gray-50","min-h-screen","p-6",3,"ngSubmit","formGroup"],[1,"max-w-7xl","mx-auto"],[1,"text-2xl","font-bold","mb-6"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6"],[1,"space-y-6","lg:col-span-2"],[1,"bg-white","p-6","rounded-xl","shadow"],[1,"font-semibold","mb-4"],[1,"block","mb-2","text-sm","font-medium"],["type","text","formControlName","model","placeholder","Product Name",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],[1,"text-red-600","text-sm","mt-1"],[1,"block","mt-4","mb-2","text-sm","font-medium"],["rows","5","formControlName","description","placeholder","Write a detailed product description...",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["formControlName","frame_material","placeholder","Category",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],["formControlName","glass_color","placeholder","",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],["formControlName","glass_type","placeholder","",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],[1,"mt-4"],[1,"space-y-2"],[1,"flex","gap-4"],[1,"border-dashed","border-2","border-gray-300","w-24","h-24","flex","items-center","justify-center","rounded-lg","cursor-pointer","hover:bg-gray-100"],["type","file",1,"hidden"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-400"],["d","M12 4v16m8-8H4","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"relative","w-24","h-24"],[1,"w-full","h-full","object-cover","rounded-lg",3,"src"],[1,"absolute","top-0","right-0","bg-red-500","text-white","text-xs","px-1","py-0.5","rounded-bl-lg"],[1,"space-y-6"],[1,"grid","grid-cols-1","gap-4"],["formControlName","brand","placeholder","Brand Name",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],["formControlName","size","placeholder","Size",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],[1,"grid","grid-cols-2","gap-2"],["formControlName","frame_color","placeholder","Frame Color",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],["formControlName","gender","placeholder","Gender",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],["formControlName","shape","placeholder","Shape",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],[1,"grid","grid-cols-2","gap-4"],["formControlName","mrp","placeholder","MRP",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],["formControlName","selling_price","placeholder","Selling Price",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],["formControlName","discount","placeholder","Discount %",1,"w-full","border","border-gray-300","rounded-lg","p-2.5"],[1,"flex","justify-between","items-center","pt-4"],["type","submit",1,"bg-emerald-500","text-white","hover:bg-gray-300","text-sm","px-4","py-2","rounded-lg","disabled:bg-gray-400","disabled:cursor-not-allowed","disabled:opacity-60",3,"disabled"]],template:function(r,n){if(r&1&&(o(0,"form",0),G("ngSubmit",function(){return n.onSubmit()}),o(1,"div",1)(2,"h1",2),e(3,"Manage Product"),i(),o(4,"div",3)(5,"div",4)(6,"div",5)(7,"h2",6),e(8,"Name and Description"),i(),o(9,"label",7),e(10,"Product Name"),i(),p(11,"input",8),o(12,"div",9),e(13),i(),o(14,"label",10),e(15,"Product Description"),i(),p(16,"textarea",11),o(17,"div",9),e(18),i()(),o(19,"div",5)(20,"h2",6),e(21,"Category"),i(),o(22,"div",12)(23,"div")(24,"label",7),e(25,"Frame Material"),i(),p(26,"input",13),o(27,"div",9),e(28),i()(),o(29,"div")(30,"label",7),e(31,"Glass Color"),i(),p(32,"input",14),o(33,"div",9),e(34),i()(),o(35,"div")(36,"label",7),e(37,"Glass Type"),i(),p(38,"input",15),o(39,"div",9),e(40),i()()(),o(41,"div",16)(42,"label",7),e(43,"Extra Categories"),i(),o(44,"div",17),f(45,Pe,0,0,null,null,x),i()()(),o(47,"div",5)(48,"h2",6),e(49,"Product Image"),i(),o(50,"div",18)(51,"label",19),p(52,"input",20),j(),o(53,"svg",21),p(54,"path",22),i()(),L(),o(55,"div",23),p(56,"img",24),o(57,"button",25),e(58,"Remove"),i()()()()(),o(59,"div",26)(60,"div",5)(61,"h2",6),e(62,"Product Details"),i(),o(63,"div",27)(64,"div")(65,"label",7),e(66,"Brand Name"),i(),p(67,"input",28),o(68,"div",9),e(69),i()(),o(70,"div")(71,"label",7),e(72,"Product Size"),i(),p(73,"input",29),o(74,"span",9),e(75),i()(),o(76,"div")(77,"label",7),e(78,"Product Colors"),i(),o(79,"div",30),p(80,"input",31),o(81,"span",9),e(82),i()()(),o(83,"div")(84,"label",7),e(85,"Gender"),i(),p(86,"input",32),o(87,"span",9),e(88),i()(),o(89,"div")(90,"label",7),e(91,"Shape"),i(),p(92,"input",33),o(93,"span",9),e(94),i()()()(),o(95,"div",5)(96,"h2",6),e(97,"Product Pricing"),i(),o(98,"div",34)(99,"div")(100,"label",7),e(101,"MRP"),i(),p(102,"input",35),o(103,"span",9),e(104),i()(),o(105,"div")(106,"label",7),e(107,"Selling Price"),i(),p(108,"input",36),o(109,"span",9),e(110),i()(),o(111,"div")(112,"label",7),e(113,"Discount (%)"),i(),p(114,"input",37),o(115,"span",9),e(116),i()()()(),o(117,"div",38)(118,"button",39),e(119,"Save Product"),i()()()()()()),r&2){let g;C("formGroup",n.productForm),d(13),c(" ",n.getErrorMessage("model")," "),d(5),c(" ",n.getErrorMessage("description")," "),d(10),c(" ",n.getErrorMessage("frame_material")," "),d(6),c(" ",n.getErrorMessage("glass_color")," "),d(6),c(" ",n.getErrorMessage("glass_type")," "),d(5),v(n.categories.controls),d(11),C("src",(g=n.productForm.get("image"))==null?null:g.value,q),d(13),c(" ",n.getErrorMessage("brand")," "),d(6),c(" ",n.getErrorMessage("size")," "),d(7),c(" ",n.getErrorMessage("frame_color")," "),d(6),c(" ",n.getErrorMessage("gender")," "),d(6),c(" ",n.getErrorMessage("shape")," "),d(10),c(" ",n.getErrorMessage("mrp")," "),d(6),c(" ",n.getErrorMessage("selling_price")," "),d(6),c(" ",n.getErrorMessage("discount")," "),d(2),C("disabled",n.productForm.pending||n.productForm.invalid)}},dependencies:[re,Y,K,Q,X,Z,ee],encapsulation:2})};var Ie=[{path:"eyeglasses",component:oe},{path:"eyeglasses/:id",component:M},{path:"sunglasses",component:ne},{path:"sunglasses/:id",component:ae}],le=class s{static \u0275fac=function(r){return new(r||s)};static \u0275mod=$({type:s});static \u0275inj=B({imports:[A.forChild(Ie),A]})};var ue=class s{static \u0275fac=function(r){return new(r||s)};static \u0275mod=$({type:s});static \u0275inj=B({imports:[me,A,le,M]})};export{ue as ProductsModule};
